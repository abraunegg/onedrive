.TH ONEDRIVE "1" "@PACKAGE_DATE@" "@PACKAGE_VERSION@" "User Commands"
.SH NAME
onedrive \- A client for the Microsoft OneDrive Cloud Service
.SH SYNOPSIS
.B onedrive
[\fI\,OPTION\/\fR] --sync
.br
.B onedrive
[\fI\,OPTION\/\fR] --monitor
.br
.B onedrive
[\fI\,OPTION\/\fR] --display-config
.br
.B onedrive
[\fI\,OPTION\/\fR] --display-sync-status
.br
.B onedrive
[\fI\,OPTION\/\fR] -h | --help
.br
.B onedrive
--version
.SH DESCRIPTION
A fully featured, free, and actively maintained Microsoft OneDrive client that seamlessly supports OneDrive Personal, OneDrive for Business, Microsoft 365 (formerly Office 365), and SharePoint document libraries.
.PP
Designed for maximum flexibility and reliability, this powerful and highly configurable client works across all major Linux distributions and FreeBSD. It can also be deployed in containerised environments using Docker or Podman. Supporting both one-way and two-way synchronisation modes, the client provides secure and efficient file syncing with Microsoft OneDrive services — tailored to suit both desktop and server environments.

.SH FEATURES
.br
* Compatible with OneDrive Personal, OneDrive for Business, and Microsoft SharePoint Libraries
.br
* Provides full support for shared folders and files across both Personal and Business accounts
.br
* Supports single-tenant and multi-tenant Microsoft Entra ID environments
.br
* Supports national cloud deployments including Microsoft Cloud for US Government, Microsoft Cloud Germany, and Azure/Office 365 operated by VNET in China
.br
* Supports bi-directional synchronisation (default) to keep local and remote data fully aligned
.br
* Supports upload-only mode to upload local changes without downloading remote changes
.br
* Supports download-only mode to download remote changes without uploading local changes
.br
* Supports a dry-run mode for safely testing configuration changes without modifying data
.br
* Implements safe conflict handling to minimise data loss by creating local backups when this is determined to be the safest resolution strategy
.br
* Provides comprehensive rules-based client-side filtering with inclusions, exclusions, wildcard matching (*), and recursive globbing (**)
.br
* Allows selective synchronisation of specific files, directories, or patterns
.br
* Caches synchronisation state for efficient processing and improved performance on large or complex sync sets
.br
* Supports near real-time processing of cloud-side changes using native WebSocket support
.br
* Supports webhook-based online change notifications where WebSockets are unsuitable (manual configuration required)
.br
* Monitors local file system changes in real-time using inotify
.br
* Implements the FreeDesktop.org Trash specification, enabling recovery of files deleted locally due to remote deletions
.br
* Protects against accidental data loss following configuration changes
.br
* Supports interruption-tolerant uploads and downloads with automatic transfer resumption
.br
* Validates file transfers to ensure data integrity
.br
* Enhances synchronisation performance through multi-threaded file transfers
.br
* Manages network usage through configurable bandwidth rate limiting
.br
* Supports desktop notifications for synchronisation events, warnings, and errors using libnotify
.br
* Provides desktop file-manager integration by registering the OneDrive folder as a sidebar location with a distinctive icon
.br
* Operates fully in both graphical and headless/server environments, with a graphical environment required only for Intune SSO, desktop notifications, and sidebar integration


.SH CONFIGURATION
By default, the OneDrive Client for Linux uses a sensible set of built-in defaults to interact with the Microsoft OneDrive service.

.PP
The client determines its configuration from three layers, applied in the following order of priority:

.PP
1. Application default values – internal defaults compiled into the client.
.br
2. Configuration file values – user-defined settings loaded from a configuration file (if present).
.br
3. Command-line arguments – values specified at runtime override both the configuration file and application defaults.
.br
.PP
The built-in application defaults are sufficient for most users and provide a reliable operational baseline. Creating a configuration file or using command-line options is optional, and only required when you wish to customise runtime behaviour.

.TP
.B NOTE:
The OneDrive Client does not create a configuration file automatically. If no configuration file is found, the client runs entirely using its internally defined default values. You only need to create a configuration file if you wish to override those defaults.

.PP
If you want to adjust the default settings, download a copy of the default configuration template into your local configuration directory.
Valid configuration file locations are:
.br
.PP
\fB~/.config/onedrive\fP – for per-user configuration.
.br
\fB/etc/onedrive\fP – for system-wide configuration.

.TP
.B Example:
To download a copy of the default configuration template, run:
.PP
.nf
\fB
mkdir -p ~/.config/onedrive
wget https://raw.githubusercontent.com/abraunegg/onedrive/master/config -O ~/.config/onedrive/config
\fP
.fi

.PP
For a full list of configuration options and command-line switches, refer to the online documentation:
.br
\fIhttps://github.com/abraunegg/onedrive/blob/master/docs/application-config-options.md\fP

.SH CLIENT SIDE FILTERING
Client Side Filtering in the context of the OneDrive Client for Linux refers to user-configured rules that determine what files and directories the client should upload or download from Microsoft OneDrive. These rules are crucial for optimising synchronisation, especially when dealing with large numbers of files or specific file types. The OneDrive Client for Linux offers several configuration options to facilitate this:
.TP
.B --skip-dir or 'skip_dir' config file option
Specifies directories that should not be synchronised with OneDrive. Useful for omitting large or irrelevant directories from the sync process.
.TP
.B --skip-dot-files or 'skip_dotfiles' config file option
Excludes dotfiles, usually configuration files or scripts, from the sync. Ideal for users who prefer to keep these files local.
.TP
.B --skip-file or 'skip_file' config file option
Allows specifying specific files to exclude from synchronisation. Offers flexibility in selecting essential files for cloud storage.
.TP
.B --skip-symlinks or 'skip_symlinks' config file option
Prevents symlinks, which often point to files outside the OneDrive directory or to irrelevant locations, from being included in the sync.
.PP
Additionally, the OneDrive Client for Linux allows the implementation of Client Side Filtering rules through a 'sync_list' file. This file explicitly states which directories or files should be included in the synchronisation. By default, any item not listed in the 'sync_list' file is excluded. This approach offers granular control over synchronisation, ensuring that only necessary data is transferred to and from Microsoft OneDrive.
.PP
These configurable options and the 'sync_list' file provide users with the flexibility to tailor the synchronisation process to their specific needs, conserving bandwidth and storage space while ensuring that important files are always backed up and accessible.
.TP
.B NOTE:
After changing any Client Side Filtering rule, a full re-synchronisation must be performed using --resync

.SH FIRST RUN
Once you've installed the application, you'll need to authorise it using your Microsoft OneDrive Account. This can be done by simply running the application without any additional command switches.
.TP
Please be aware that some companies may require you to explicitly add this app to the Microsoft MyApps portal. To add an approved app to your apps, click on the ellipsis in the top-right corner and select "Request new apps." On the next page, you can add this app. If it's not listed, you should make a request through your IT department.
.TP
When you run the application for the first time, you'll be prompted to open a specific URL using your web browser, where you'll need to log in to your Microsoft Account and grant the application permission to access your files. After granting permission to the application, you'll be redirected to a blank page. Simply copy the URI from the blank page and paste it into the application.
.TP
This process authenticates your application with your account information, and it is now ready to use to sync your data between your local system and Microsoft OneDrive.

.SH GUI NOTIFICATIONS
If the client has been compiled with support for notifications, the client will send notifications about client activity via libnotify to the GUI via DBus when the client is being run in --monitor mode.

.SH APPLICATION LOGGING
When running onedrive all actions can be logged to a separate log file. This can be enabled by using the \fB--enable-logging\fP flag. By default, log files will be written to \fB/var/log/onedrive\fP. All logfiles will be in the format of \fB%username%.onedrive.log\fP, where \fB%username%\fP represents the user who ran the client.

.SH ALL CLI OPTIONS
The options below allow you to control the behaviour of the onedrive client from the CLI. Without any specific option, if the client is already authenticated, the client will exit without any further action.

.TP
\fB\-\-sync\fR, -s
Do a one-time synchronisation with Microsoft OneDrive.

.TP
\fB\-\-monitor\fR, -m
Monitor filesystem and synchronise regularly with Microsoft OneDrive.

.TP
\fB\-\-display-config\fR
Display the currently used configuration for the onedrive client.

.TP
\fB\-\-display-sync-status\fR
Query OneDrive service and report on pending changes.

.TP
\fB\-\-auth-files\fR \fIARG\fR
Perform authentication not via interactive dialogue but via files that are read/written when using this option. The two files are passed in as \fBARG\fP in the format \fBauthUrl:responseUrl\fP.
The authorisation URL is written to the \fBauthUrl\fP file, then \fBonedrive\fP waits for the file \fBresponseUrl\fP to be present, and reads the response from that file.
.br
Always specify the full path when using this option, otherwise the application will default to using the default configuration path for these files (~/.config/onedrive/)

.TP
\fB\-\-auth-response\fR \fIARG\fR
Perform authentication not via interactive dialogue but via providing the response URL directly.

.TP
\fB\-\-check-for-nomount\fR
Check for the presence of .nosync in the syncdir root. If found, do not perform sync.

.TP
\fB\-\-check-for-nosync\fR
Check for the presence of .nosync in each directory. If found, skip directory from sync.

.TP
\fB\-\-classify-as-big-delete\fR \fIARG\fR
Number of children in a path that is locally removed which will be classified as a 'big data delete'.

.TP
\fB\-\-cleanup-local-files\fR
Clean up additional local files when using --download-only. This will remove local data.

.TP
\fB\-\-confdir\fR \fIARG\fR
Set the directory used to store the configuration files.

.TP
\fB\-\-create-directory\fR \fIARG\fR
Create a directory on OneDrive. No synchronisation will be performed.

.TP
\fB\-\-create-share-link\fR \fIARG\fR
Create a shareable link for an existing file on OneDrive.
.br
Use --with-editing-perms to create a read-write share link instead of read-only.
.br
Use --share-password <password> to protect the shared link with a password.

.TP
\fB\-\-debug-https\fR
Debug OneDrive HTTPS communication.

.TP
\fB\-\-destination-directory\fR \fIARG\fR
Destination directory for renamed or moved items on OneDrive. No synchronisation will be performed.

.TP
\fB\-\-disable-download-validation\fR
Disable download validation when downloading from OneDrive.

.TP
\fB\-\-disable-notifications\fR
Do not use desktop notifications in monitor mode.

.TP
\fB\-\-disable-upload-validation\fR
Disable upload validation when uploading to OneDrive.

.TP
\fB\-\-display-quota\fR
Display the quota status of the client. No synchronisation will be performed.

.TP
\fB\-\-download-file\fR \fIARG\fR
Download a single file from Microsoft OneDrive.
.br
Specify the full online path to the file. No synchronisation will be performed.

.TP
\fB\-\-display-running-config\fR
Display what options the client has been configured to use on application startup.

.TP
\fB\-\-download-only\fR
Replicate the OneDrive online state locally, by only downloading changes from OneDrive. Do not upload local changes to OneDrive.

.TP
\fB\-\-dry-run\fR
Perform a trial sync with no changes made.

.TP
\fB\-\-enable-logging\fR
Enable client activity to a separate log file.

.TP
\fB\-\-file-fragment-size\fR \fIARG\fR
Specify the file fragment size for large file uploads (in MB).

.TP
\fB\-\-force\fR
Force the deletion of data when a 'big delete' is detected.

.TP
\fB\-\-force-http-11\fR
Force the use of HTTP 1.1 for all operations.

.TP
\fB\-\-force-sync\fR
Force a synchronisation of a specific folder, only when using --sync --single-directory and ignore all non-default skip_dir and skip_file rules.

.TP
\fB\-\-get-O365-drive-id\fR \fIARG\fR
Query and return the Office 365 Drive ID for a given Office 365 SharePoint Shared Library (DEPRECATED).

.TP
\fB\-\-get-file-link\fR \fIARG\fR
Display the file link of a synced file.

.TP
\fB\-\-get-sharepoint-drive-id\fR \fIARG\fR
Query and return the Office 365 Drive ID for a given Office 365 SharePoint Shared Library.

.TP
\fB\-\-help\fR, \fB\-h\fR
Display application help.

.TP
\fB\-\-list-shared-items\fR
List OneDrive Business Shared Items.

.TP
\fB\-\-local-first\fR
Synchronise from the local directory source first, before downloading changes from OneDrive.

.TP
\fB\-\-log-dir\fR \fIARG\fR
Directory where logging output is saved to, needs to end with a slash.

.TP
\fB\-\-logout\fR
Log out the current user.

.TP
\fB\-\-modified-by\fR \fIARG\fR
Display the last modified by details of a given path.

.TP
\fB\-\-monitor-fullscan-frequency\fR \fIARG\fR
Number of sync runs before performing a full local scan of the synced directory.

.TP
\fB\-\-monitor-interval\fR \fIARG\fR
Number of seconds by which each sync operation is undertaken when idle under monitor mode.

.TP
\fB\-\-monitor-log-frequency\fR \fIARG\fR
Frequency of logging in monitor mode.

.TP
\fB\-\-no-remote-delete\fR
Do not delete local file 'deletes' from OneDrive when using --upload-only.

.TP
\fB\-\-print-access-token\fR
Print the access token, useful for debugging.

.TP
\fB\-\-reauth\fR
Reauthenticate the client with OneDrive.

.TP
\fB\-\-remove-directory\fR \fIARG\fR
Remove a directory on OneDrive. No synchronisation will be performed.

.TP
\fB\-\-remove-source-files\fR
Remove source file after successful transfer to OneDrive when using --upload-only.

.TP
\fB\-\-remove-source-folders\fR
Remove the local directory structure post successful file transfer to Microsoft OneDrive when using --upload-only --remove-source-files.

.TP
\fB\-\-resync\fR
Forget the last saved state, perform a full sync.

.TP
\fB\-\-resync-auth\fR
Approve the use of performing a --resync action.

.TP
\fB\-\-share-password\fR \fIARG\fR
Require a password to access the shared link when used with --create-share-link <file>.
Only supported for OneDrive Business and SharePoint environments that permit password-protected sharing.

.TP
\fB\-\-single-directory\fR \fIARG\fR
Specify a single local directory within the OneDrive root to sync.

.TP
\fB\-\-skip-dir\fR \fIARG\fR
Skip any directories that match this pattern from syncing.

.TP
\fB\-\-skip-dir-strict-match\fR
When matching skip_dir directories, only match explicit matches.

.TP
\fB\-\-skip-dot-files\fR
Skip dot files and folders from syncing.

.TP
\fB\-\-skip-file\fR \fIARG\fR
Skip any files that match this pattern from syncing.

.TP
\fB\-\-skip-size\fR \fIARG\fR
Skip new files larger than this size (in MB).

.TP
\fB\-\-skip-symlinks\fR
Skip syncing of symlinks.

.TP
\fB\-\-source-directory\fR \fIARG\fR
Source directory to rename or move on OneDrive. No synchronisation will be performed.

.TP
\fB\-\-space-reservation\fR \fIARG\fR
The amount of disk space to reserve (in MB) to avoid 100% disk space utilisation.

.TP
\fB\-\-sync-root-files\fR
Sync all files in sync_dir root when using sync_list.

.TP
\fB\-\-sync-shared-files\fR
Sync OneDrive Business Shared Files to the local filesystem.

.TP
\fB\-\-syncdir\fR \fIARG\fR
Specify the local directory used for synchronisation to OneDrive.

.TP
\fB\-\-synchronize\fR
Perform a synchronisation with Microsoft OneDrive (DEPRECATED).

.TP
\fB\-\-threads\fR \fIARG\fR
Specify a value for the number of worker threads used for parallel upload and download operations.

.TP
\fB\-\-upload-only\fR
Replicate the locally configured sync_dir state to OneDrive, by only uploading local changes to OneDrive. Do not download changes from OneDrive.

.TP
\fB\-\-verbose\fR, \fB\-v+\fR
Print more details, useful for debugging (repeat for extra debugging).

.TP
\fB\-\-version\fR
Print the version and exit.

.TP
\fB\-\-with-editing-perms\fR
Create a read-write shareable link for an existing file on OneDrive when used with --create-share-link <file>.

.SH DOCUMENTATION
All documentation is available on GitHub: https://github.com/abraunegg/onedrive/tree/master/docs/


.SH SEE ALSO
.BR curl(1),
